{% extends 'base.html' %}
{% load i18n %}
{% block title %}
{% trans "Dashboard" %}
{% endblock title %}

{% block content %}

    <div class="publisher-container">
        <h2 class="hd-2 emphasized">Course runs</h2>
        <ul class="nav-tabs">
            <li {% if need_studio_request_courses_count = 0 %}class="active"{% endif %}><a href="#tab-1"><span>0</span>{% trans "IN PROGRESS" %}</a></li>
            <li><a href="#tab-2"><span>0</span>{% trans "PREVIEW READY" %}</a></li>
            <li {% if need_studio_request_courses_count > 0 %}class="active"{% endif %}>
                <a href="#tab-3"><span>{{ need_studio_request_courses|length }} </span>{% trans "STUDIO REQUEST" %}</a>
            </li>
        </ul>
        <div class="tabs-container">
            <div id="tab-1" class="tab-content {% if need_studio_request_courses_count = 0 %}active{% endif %}"></div>
            <div id="tab-2" class="tab-content"></div>
            <div id="tab-3" class="tab-content {% if need_studio_request_courses_count > 0 %}active{% endif %}">
                <p>{% trans "The list below are the are course that need a studio instance to start development." %}</p>
                <table id="example" class="display" cellspacing="0" width="100%">
                    <thead>
                        <tr>
                        <th>
                            {% trans "Course Name" %}
                        </th>
                        <th>
                            {% trans "Start Date" %}
                        </th>
                        <th>
                            {% trans "Course Number" %}
                        </th>
                        <th>
                            {% trans "Studio URL" %}
                        </th>
                    </thead>

                    <tbody>
                        {% for course_run in need_studio_request_courses %}
                            <tr>
                                <td>
                                    <a href="{% url 'publisher:publisher_course_run_detail' course_run.id %}">{{ course_run.title }}</a>
                                </td>
                                <td>
                                     {{ course_run.start }}
                                </td>
                                <td>
                                    {{ course_run.number }}
                                </td>
                                <td>
                                    <input type="text" class="field-input input-text" />
                                    <button class="btn-inline">ADD</button>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

{% endblock %}
{% block extra_js %}
    <script>
        $(document).ready(function() {

                 var table = $('#example').DataTable();
            $('#example tbody').on('click', 'tr', function () {
                var data = table.row( this ).data();
                alert( 'You clicked on '+data[0]+'\'s row' );
            } );

            $(".nav-tabs a").click(function(event) {
                event.preventDefault();
                $(this).parent().addClass("active");
                $(this).parent().siblings().removeClass("active");
                var tab = $(this).attr("href");
                $(".tab-content").not(tab).css("display", "none");
                $(tab).fadeIn();
            });
        });
    </script>
{% endblock %}

