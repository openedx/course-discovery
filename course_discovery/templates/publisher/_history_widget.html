{% load i18n %}
<div class="margin-top20">
    <h5 class="hd-5 emphasized course-runs-heading">{% trans "REVISION HISTORY" %}</h5>
    <br>
    <select id="id_select_revisions" class="select-revision">
        {% for history in history_list %}
            {% if forloop.first %}
                <option value="{% url 'publisher:publisher_course_revision' course.id history.history_id %}">
                    {% blocktrans with history.history_date|date:'d-m-Y' as history_date and history.changed_by as changed_by trimmed %}
                        {{ history_date }}&nbsp;by&nbsp;{{ changed_by}} (Latest version)
                    {% endblocktrans %}
                </option>
            {% else %}
                {% url 'publisher:api:course_revisions' history.history_id as revision_url  %}
                {% url 'publisher:publisher_course_revision' course.id history.history_id as course_revision_url %}
                {% url 'publisher:api:course_revision_revert' history.history_id as revision_revert_url %}
                {% url 'publisher:publisher_courses_edit' pk=object.id  as revision_id_url %}
                <option data-revision-url="{{ revision_url }}"
                        value="{{ course_revision_url }}"
                        data-revert-url="{{ revision_revert_url }}"
                        data-revision-id="{{ revision_id_url }}?history_id={{ history.history_id }}" >
                    {% blocktrans with history.history_date|date:'d-m-Y' as history_date and history.changed_by as changed_by trimmed %}
                        {{ history_date }}&nbsp;by&nbsp;{{ changed_by}}
                    {% endblocktrans %}
                </option>
            {% endif %}
        {% endfor %}
    </select>
    <span id="span_revert_revision" class="hidden">
        <a id="id_revert_revision" class="btn btn-brand btn-small btn-courserun-add btn-revision">{% trans "Restore to this version" %}</a>
    </span>
    <a id="id_open_revision" class="btn btn-brand btn-small btn-courserun-add btn-revision" href="{% url 'publisher:publisher_course_revision' course.id history_list.first.history_id %}" target="_blank">{% trans "Open Selected Version" %}</a>
    <div id="RevertRevisionAlert" class="alert alert-error hidden" role="alert">{% trans "Unable to revert the revision, Please try again later." %}</div>
</div>
{% include 'publisher/_revert_confirmation.html' %}
